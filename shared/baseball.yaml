###Baseball
- WORLD:
  - bonus_variables: [Bpalla_zona_battitore,Bpallastrike,Boldstrike,Bnumstrike,Btuttiinposizione,percentuale_di_successo_battuta,xballd,yballd]
    Bpalla_zona_battitore: 'abs(xball)<0.5 and abs(yball)<0.5'
    Bpallastrike: 'yball<0'
    Boldstrike: Bpallastrike
    Bnumstrike: '(Bnumstrike+if (not(Boldstrike) and Bpallastrike,0,1))'
    Btuttiinposizione: 'abs(xball)<0.2 and abs(yball-5)<0.2'
    percentuale_di_successo_battuta: '1>0.5'
    xballD: xball
    yballD: yball
  AGENTS:
  - agent: Ball
    #VISIBLE AREA: ./battle/exp_t_visuale.txt
    #NEIGHBORHOOD =  ./battle/exp_t_visuale.txt
    #MONITORING = 0
    #COLLABORATIVE = 1
    states: [x,y,angle]
    control_commands: [v,theta]
    INITIAL:
    - x: '0'
      y: '5'
      angle: '0'
    STATE_START: STARTING
    DYNAMIC_MAP:
    - x: 'v*cos(theta)'
      y: 'v*sin(theta)'
      angle: '0'
    BEHAVIOR:
    - name: Ball 
      CONTROLLERS:
      - name: lancio
        v: 'if (v=0,7,v)'
        theta: -pi_greco/2
        #/2 + rndom(-pi_greco/16,+pi_greco/16)
      - name: battuta
        v: '10-v/10'
        #Sto barando perch√® dovrei avere una dinamica che fa questa cosa e non un controllore
        theta: pi_greco/2
        #/2 + rndom(-pi_greco/16,+pi_greco/16)
      - name: fine_corsa
        v: '0'
        theta: '0'
      - name: rilancio
        v: '5'
        theta: atan2(-y,-x)
      - name: reset
        v: 2
        theta: atan2(5-y,-x)
      - name: stop
        v: 0
        theta: 0
      DISCRETE_STATES:
      - name: lancio
        controller: lancio
      - name: battuta
        controller: battuta
      - name: fine_corsa
        controller: fine_corsa
      - name: reset
        controller: reset
      - name: rilancio
        controller: rilancio
      - name: starting
        controller: stop
      - name: waiting
        controller: stop
      ENCODER:
      - TOPOLOGY:
          - topology: [palla_presa]
            palla_presa: 'abs(x-xi)<0.5 and abs(y-yi)<0.5'
        LAMBDA:
          - lambda: [Ttuttiinposizione,Lpalla_zona_battitore,Lfaul,Lfuoricampo,Lpallainposizionedilancio,LpallaBattuta]
            Lpalla_zona_battitore: 'Bpalla_zona_battitore=1'
            Lfaul: y<0
            Lfuoricampo: y>60
            Lpallainposizionedilancio: abs(x-0)<0.5 and abs(y-5)<0.5
            LpallaBattuta: percentuale_di_successo_battuta
            Ttuttiinposizione: 'Btuttiinposizione==1'
      EVENTS:
      - events: [Ezonabattuta,Ereset,EpallaBattuta,Efuoricampo,Epresa,Epallaattesa,Etuttiinposizione] 
        Ezonabattuta: Lpalla_zona_battitore
        Ereset: '!Lpalla_zona_battitore Lfaul'
        EpallaBattuta: LpallaBattuta
        Efuoricampo: Lfuoricampo
        Epresa: palla_presa
        Epallaattesa: Lpallainposizionedilancio
        Etuttiinposizione: Ttuttiinposizione
      AUTOMATON:
      - name: ball
        LANCIO:
          - PROVA_BATTUTA: [Ezonabattuta]
            RESET: [Ereset]
        PROVA_BATTUTA:
          - BATTUTA: [EpallaBattuta]
            RESET: [!EpallaBattuta]
        BATTUTA:
          - WAITING: [Efuoricampo]
            RILANCIO: [Epresa]
        WAITING:
          - RILANCIO: [Epresa]
        RILANCIO:
          - RESET: [Ezonabattuta]
        RESET:
          - STARTING: [Epallaattesa]
        STARTING:
          - LANCIO: [Etuttiinposizione]